REGRA PARA IDE DE IA — GERAÇÃO FLUTTER VIA MCP FIGMA
==================================================

OBJETIVO
--------
Gerar código Flutter a partir do Figma utilizando MCP.
Nenhuma decisão criativa, inferência ou adaptação é permitida.

REGRA GLOBAL (BLOQUEANTE)
------------------------
- O MCP é a ÚNICA fonte da verdade.
- Tudo o que não estiver explicitamente definido no MCP é PROIBIDO.
- Em caso de ausência, ambiguidade ou conflito de informação → FALHAR IMEDIATAMENTE.
- Não assumir, não inferir, não completar, não adaptar.
- Não interpretar Figma, tokens ou componentes.

==================================================
FLUXO OBRIGATÓRIO MCP (BLOQUEANTE)
==================================================

Ao implementar qualquer design do Figma, é OBRIGATÓRIO:

1. Chamar get_design_context (nodeId do Figma)
2. Chamar get_screenshot (mesmo nodeId)

- Não gerar código sem ter usado ambos os responses.
- Estrutura, hierarquia, espaçamentos e direção do layout vêm EXCLUSIVAMENTE desses dois calls.
- Nunca inferir informações visuais ausentes.

==================================================
NOMES E IDENTIDADE DE COMPONENTES (BLOQUEANTE)
==================================================

- O nome do componente Flutter deve ser derivado EXCLUSIVAMENTE do get_metadata do MCP.
- O atributo `name` do symbol é a única fonte válida.

Exemplo MCP:
  symbol id="43:151" name="Page Header Profile"

Regras de conversão:
- Remover espaços
- PascalCase
- Resultado obrigatório: PageHeaderProfile

Esse nome determina obrigatoriamente:
- Nome do arquivo: page_header_profile.dart
- Nome da classe Flutter: PageHeaderProfile
- Nome da página no Widgetbook: PageHeaderProfile

Regras adicionais:
- Prefixos só podem existir se definidos explicitamente no MCP.
- Nomes, props, tokens e estados são case-sensitive.
- Qualquer divergência é erro bloqueante.
- Nenhum renomeio alternativo é permitido.

==================================================
COMPONENTES DO DESIGN SYSTEM (PRIORIDADE MÁXIMA)
==================================================

- Componentes existentes no Design System DEVEM ser reutilizados obrigatoriamente.
- É PROIBIDO substituir componentes do DS por:
  - Widgets nativos do Flutter
  - Bibliotecas externas
  - Implementações manuais equivalentes

Regras:
- Widgets nativos do Flutter só podem ser usados como base interna de um componente do DS.
- Sempre importar o componente do DS.
- Em caso de conflito de nome, usar `hide` no import do Flutter e importar explicitamente o do DS.

==================================================
PROPS E API PÚBLICA
==================================================

- O get_design_context fornece types (TypeScript) das props.
- Usar EXCLUSIVAMENTE o type cujo nome seja <ComponentName>Props.
- Ignorar qualquer outro type.

Regras:
- O widget Flutter deve expor EXATAMENTE as props definidas nesse type.
- Não adicionar, remover ou adaptar props.
- Não adicionar callbacks, textos, flags ou parâmetros não definidos no MCP.
- Valores default definidos no MCP devem ser respeitados.
- Cada prop deve virar um knob no Widgetbook.
- Não criar knobs extras.

==================================================
ESTADOS E VARIAÇÕES
==================================================

- Estados representam APENAS variações visuais.
- Estados NÃO representam lógica de interação.
- Não adicionar handlers, callbacks ou lógica não definida.
- Estruturas condicionais só são permitidas se explicitamente descritas no MCP.
- Não unificar, simplificar ou inferir estados.

==================================================
TELAS (MAPEAMENTO FIGMA ↔ FLUTTER)
==================================================

- Mapeamento é 1:1 entre componentes do Figma e widgets Flutter.
- Usar exatamente os componentes definidos no MCP.
- Não simular componentes com layout manual.
- Não duplicar implementações de componentes dentro de telas.

==================================================
TOKENS (BLOQUEANTE)
==================================================

- Usar EXCLUSIVAMENTE os tokens fornecidos pelo MCP.
- Tokens já vêm no formato Flutter e devem ser usados literalmente.

Proibições:
- Criar novos tokens
- Substituir tokens
- Modificar tokens
- Usar valores fixos
- Usar fallback numérico
- Usar withOpacity, lerp ou conversões numéricas

==================================================
MAPEAMENTO DE TOKENS (BLOQUEANTE)
==================================================

- O nome do token define exatamente qual token usar.
- Não substituir tokens por equivalentes semânticos.
- Exemplo:
  MCP: SpacingTokens/gapMedium
  Flutter: SpacingTokens.gapMedium

==================================================
TIPOGRAFIA (BLOQUEANTE)
==================================================

- Tipografia deve vir exclusivamente de tokens MCP.
- Tokens tipográficos são usados como objetos completos.

Proibições:
- Criar TextStyle manualmente
- Usar TextStyle.copyWith
- Definir manualmente fontSize, fontWeight, fontFamily, height ou letterSpacing
- Usar Theme.of(context).textTheme

- Se o token tipográfico necessário não existir → FALHAR.

==================================================
LAYOUT E HIERARQUIA (BLOQUEANTE)
==================================================

- A hierarquia do layout vem exclusivamente do MCP.
- Respeitar exatamente:
  - Ordem visual
  - Direção dos eixos
  - Aninhamento
  - Constraints

Regras:
- Ordem dos widgets deve seguir o Figma (top-down / left-right).
- Cada frame do Figma corresponde a um widget pai direto.
- Padding e margens definidos no Figma DEVEM ser implementados.
- Usar apenas tokens MCP para espaçamento.

Proibições:
- Criar layout responsivo
- Adaptar para diferentes telas
- Reordenar ou agrupar widgets
- Usar Stack, Positioned, Expanded, Flexible, Align ou SizedBox
  sem indicação explícita do MCP

==================================================
EFEITOS VISUAIS
==================================================

- Bordas, sombras, blur e efeitos só podem existir se definidos no MCP.
- Não ajustar valores.
- Não simplificar efeitos.

==================================================
CONTEÚDO A IGNORAR
==================================================

- Instruções específicas de stacks que não sejam Flutter
- Documentações narrativas
- Textos explicativos
- Node IDs e metadados não fazem parte do código final

==================================================
WIDGETBOOK
==================================================

- Cada componente deve ter UMA única página no Widgetbook.
- O nome da página deve ser exatamente o nome do componente.
- Estados não criam navegação.
- Estados são controlados por knobs.
- Não criar WidgetbookUseCase por estado.
- Não duplicar componentes para simular variações.
- Ordenar componentes de A a Z.

==================================================
FAIL FAST (BLOQUEANTE)
==================================================

- Qualquer inconsistência entre MCP, código Flutter ou Widgetbook:
  → Interromper a geração imediatamente.
- Não gerar código parcial.
- Não corrigir automaticamente.
- O erro deve indicar:
  - Regra violada
  - Dado ausente, ambíguo ou conflitante no MCP

==================================================
FINAL
==================================================

Sem criatividade.
Sem inferências.
Sem otimizações.

O MCP é a fonte da verdade.
